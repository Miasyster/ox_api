# 真实股票交易使用指南

本指南说明如何使用 `real_trading.py` 脚本进行真实的股票下单操作。

## ⚠️ 重要警告

**这是一个真实的交易系统！**

- 所有操作都会产生真实的交易
- 请确保您完全了解交易风险
- 建议先在模拟环境中测试
- 请谨慎操作，避免误操作造成损失

## 前置条件

### 1. 环境要求

- **操作系统**: Windows（DLL 文件仅支持 Windows）
- **Python 版本**: Python 3.7 或更高版本
- **网络连接**: 确保网络连接正常

### 2. 文件要求

确保以下文件存在：

- `bin/GuosenOXAPI.dll` - 主 DLL 文件
- `bin/config/config.ini` - 配置文件（可选）
- 其他必要的 DLL 文件

### 3. 账户信息

准备以下信息：

- 资金账号
- 交易密码
- 账户类型（现货/期权/期货/信用交易）
- 上海股东账号（如需要交易上海市场）
- 深圳股东账号（如需要交易深圳市场）

## 配置方式

### 方式一：使用配置文件（推荐）

编辑 `bin/config/config.ini` 文件：

```ini
[user]
acct=你的资金账号
password=你的交易密码
# 账户类型: 0-现货, 1-期权, 2-期货, 3-信用交易
acct_type=0
sh_trade_account=上海股东账号
sz_trade_account=深圳股东账号
```

**安全提示**: 
- 不要将配置文件提交到版本控制系统
- 不要将账户密码分享给他人
- 定期更改密码

### 方式二：手动输入

如果未配置或不想使用配置文件，脚本会提示您手动输入账户信息。

## 使用方法

### 1. 启动脚本

```bash
cd python
python examples/real_trading.py
```

### 2. 登录

脚本启动后会：

1. 尝试加载配置文件
2. 如果找到配置文件，询问是否使用
3. 如果未找到或不使用配置文件，提示手动输入账户信息
4. 初始化 API 并登录

### 3. 交易操作

登录成功后，进入交易菜单：

```
交易菜单
  1 - 下单
  2 - 撤单
  3 - 查看订单
  4 - 退出
```

#### 下单（选项 1）

1. 选择交易方向：
   - 1 - 买入
   - 2 - 卖出

2. 选择交易板块：
   - 1 - 上海（600xxx, 688xxx）
   - 2 - 深圳（000xxx, 001xxx, 002xxx, 300xxx）

3. 输入股东账号（根据板块选择）

4. 输入证券代码（如：600000）

5. 选择委托类型：
   - 1 - 限价单（需输入价格）
   - 2 - 市价单（价格自动为 0）

6. 输入委托价格（限价单）

7. 输入委托数量（股）

8. 输入客户委托信息（可选）

9. 确认下单

#### 撤单（选项 2）

1. 输入交易板块（10-上海, 00-深圳）
2. 输入委托编号
3. 确认撤单

#### 查看订单（选项 3）

显示：
- 所有委托订单及其状态
- 成交订单信息

## 回调说明

脚本会实时显示以下回调信息：

### 登录响应

显示登录结果和账户信息。

### 委托回报

显示委托单的状态变化：
- 委托编号
- 证券代码
- 委托数量
- 委托价格
- 委托状态
- 成交数量
- 撤单数量
- 错误信息（如有）

### 成交回报

显示成交信息：
- 委托编号
- 证券代码
- 成交数量
- 成交价格
- 成交金额
- 成交日期
- 成交时间

### 撤单响应

显示撤单结果：
- 撤单是否成功
- 错误信息（如有）

## 示例

### 示例 1：限价单买入

```
交易方向: 1 (买入)
交易板块: 1 (上海)
股东账号: A197407210
证券代码: 600000
委托类型: 1 (限价单)
委托价格: 10.50
委托数量: 100
```

### 示例 2：市价单卖出

```
交易方向: 2 (卖出)
交易板块: 2 (深圳)
股东账号: 0000035074
证券代码: 000001
委托类型: 2 (市价单)
委托数量: 200
```

## 常见问题

### 1. DLL 加载失败

**错误信息**: `OXDllError: Failed to load DLL`

**解决方法**:
- 检查 DLL 文件是否存在
- 确认 DLL 文件路径正确
- 确认在 Windows 环境下运行
- 检查 DLL 文件是否损坏

### 2. 登录失败

**错误信息**: `OXLoginError: Login failed`

**解决方法**:
- 检查账户信息是否正确
- 确认账户类型选择正确
- 检查网络连接
- 确认账户状态正常

### 3. 下单失败

**错误信息**: `OXOrderError: Order request failed`

**解决方法**:
- 检查股东账号是否正确
- 确认证券代码正确
- 检查价格和数量是否合法
- 确认账户资金充足
- 检查交易时间（是否在交易时间内）

### 4. 撤单失败

**错误信息**: `撤单失败`

**解决方法**:
- 检查委托编号是否正确
- 确认委托单可以撤单（未全部成交）
- 检查交易板块是否正确

## 注意事项

1. **交易时间**
   - 上海/深圳股票交易时间：
     - 上午：9:30 - 11:30
     - 下午：13:00 - 15:00
   - 盘前和盘后时间可能有限制

2. **价格限制**
   - 限价单价格需要符合涨跌幅限制
   - 市价单可能以不利价格成交

3. **数量限制**
   - 最小交易单位：100 股（一手）
   - 数量必须是 100 的整数倍

4. **资金和持仓**
   - 买入需要足够的资金
   - 卖出需要足够的持仓

5. **风险提示**
   - 股票交易有风险，请谨慎操作
   - 建议设置止损和止盈
   - 不要过度交易

## 安全建议

1. **账户安全**
   - 使用强密码
   - 定期更改密码
   - 不要在公共网络下使用
   - 保护好账户信息

2. **代码安全**
   - 不要将包含账户信息的配置文件提交到版本控制
   - 不要在代码中硬编码账户信息
   - 定期检查代码和配置

3. **交易安全**
   - 仔细核对订单信息
   - 建议使用限价单而非市价单
   - 设置合理的价格和数量
   - 及时查看订单状态

## 技术支持

如遇到问题：

1. 查看错误信息
2. 检查日志文件（如有）
3. 查看项目文档
4. 查看示例代码
5. 联系技术支持（如有）

## 免责声明

本软件仅供学习和研究使用。使用者需自行承担交易风险。开发者和项目维护者不对任何交易损失承担责任。

---

**最后更新**: 2024年

