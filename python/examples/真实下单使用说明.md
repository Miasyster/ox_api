# 真实股票下单使用说明

本说明将帮助您使用项目进行真实的股票下单操作。

## ⚠️ 重要警告

**这是真实的交易系统！**

- 所有操作都会产生真实的交易
- 请确保您完全了解交易风险
- 建议先在模拟环境中测试
- 请谨慎操作，避免误操作造成损失

## 前置准备

### 1. 检查配置文件

确保配置文件 `ox_api/bin/config/config.ini` 存在并包含正确的账户信息：

```ini
[user]
acct=你的资金账号
password=你的交易密码
acct_type=0
sh_trade_account=上海股东账号
sz_trade_account=深圳股东账号
```

**账户类型说明：**
- `0` - 现货
- `1` - 期权
- `2` - 期货
- `3` - 信用交易

### 2. 检查 DLL 文件

确保以下 DLL 文件存在于 `ox_api/bin/` 目录：
- `GuosenOXAPI.dll`
- 其他必要的 DLL 文件

## 使用方法

### 方法一：使用简化版下单脚本（推荐新手）

简化版脚本 `simple_real_order.py` 提供最基础的下单功能：

```bash
cd ox_api/python
python examples/simple_real_order.py
```

**特点：**
- 交互式界面，易于使用
- 自动从配置文件读取账户信息
- 支持买入/卖出、限价单/市价单
- 显示委托回报和成交回报

**使用步骤：**
1. 运行脚本
2. 输入 `yes` 确认使用真实交易系统
3. 脚本会自动从配置文件加载账户信息并登录
4. 按照提示输入下单信息
5. 确认下单信息后执行下单

### 方法二：使用完整版交易脚本（推荐高级用户）

完整版脚本 `real_trading.py` 提供完整的交易功能：

```bash
cd ox_api/python
python examples/real_trading.py
```

**特点：**
- 完整的交易菜单（下单、撤单、查看订单）
- 支持配置文件或手动输入账户信息
- 实时显示所有回调信息
- 支持批量操作

**功能菜单：**
```
交易菜单
  1 - 下单
  2 - 撤单
  3 - 查看订单
  4 - 退出
```

## 下单示例

### 示例 1：限价单买入

```
交易方向: 1 (买入)
交易板块: 1 (上海)
股东账号: A197407210
证券代码: 600000
委托类型: 1 (限价单)
委托价格: 10.50
委托数量: 100
```

### 示例 2：市价单卖出

```
交易方向: 2 (卖出)
交易板块: 2 (深圳)
股东账号: 0000035074
证券代码: 000001
委托类型: 2 (市价单)
委托数量: 200
```

## 注意事项

### 交易时间

上海/深圳股票交易时间：
- 上午：9:30 - 11:30
- 下午：13:00 - 15:00

非交易时间下单可能会失败或被延迟处理。

### 价格和数量限制

1. **最小交易单位**：100 股（一手）
2. **数量要求**：必须是 100 的整数倍
3. **价格限制**：
   - 限价单价格需要符合涨跌幅限制
   - 市价单可能以不利价格成交

### 资金和持仓要求

- **买入**：需要足够的可用资金
- **卖出**：需要足够的可用持仓

## 常见问题

### 1. DLL 加载失败

**错误信息**：`OXDllError: Failed to load DLL`

**解决方法**：
- 检查 DLL 文件是否存在：`ox_api/bin/GuosenOXAPI.dll`
- 确认在 Windows 环境下运行
- 检查 DLL 文件是否损坏

### 2. 登录失败

**错误信息**：`OXLoginError: Login failed`

**解决方法**：
- 检查配置文件中的账户信息是否正确
- 确认账户类型选择正确
- 检查网络连接
- 确认账户状态正常（未被锁定等）

### 3. 下单失败

**错误信息**：`OXOrderError: Order request failed`

**可能原因**：
- 股东账号不正确
- 证券代码错误
- 价格或数量不合法
- 账户资金不足（买入时）
- 账户持仓不足（卖出时）
- 不在交易时间内
- 价格超出涨跌幅限制

**解决方法**：
- 仔细检查所有下单参数
- 确认账户资金/持仓充足
- 确认在交易时间内
- 检查价格是否符合涨跌幅限制

### 4. 未收到委托回报

**可能原因**：
- 网络延迟
- 服务器处理延迟
- 回调接口未正确注册

**解决方法**：
- 等待几秒钟，回报可能会延迟到达
- 检查网络连接
- 确认回调接口已正确注册

## 安全建议

### 账户安全

1. **密码安全**：
   - 使用强密码
   - 定期更改密码
   - 不要在公共网络下使用

2. **配置文件安全**：
   - 不要将配置文件提交到版本控制系统
   - 不要在代码中硬编码账户信息
   - 定期检查配置文件的访问权限

### 交易安全

1. **仔细核对**：
   - 下单前仔细核对所有参数
   - 确认交易方向（买入/卖出）正确
   - 确认证券代码正确
   - 确认价格和数量合理

2. **使用限价单**：
   - 建议使用限价单而非市价单
   - 限价单可以控制成交价格
   - 市价单可能以不利价格成交

3. **及时查看**：
   - 下单后及时查看订单状态
   - 注意接收委托回报和成交回报
   - 必要时及时撤单

## 获取帮助

如果遇到问题：

1. 查看错误信息，根据错误提示进行排查
2. 检查日志文件（如有）
3. 查看详细文档：
   - `REAL_TRADING_GUIDE.md` - 详细使用指南
   - `QUICK_START_REAL_TRADING.md` - 快速开始指南
   - `docs/API_REFERENCE.md` - API 参考文档
4. 查看示例代码了解使用方法

## 免责声明

本软件仅供学习和研究使用。使用者需自行承担交易风险。开发者和项目维护者不对任何交易损失承担责任。

---

**最后更新**：2024年

